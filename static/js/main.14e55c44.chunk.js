(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(4),o=n.n(i),r=(n(14),n(5)),l=n(6),c=n(1),p=n(8),g=n(7),m=n(2),u=n.n(m);n(15);function h(e){if(!e)return null;try{var t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(n){return null}}n(16);var d=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={apiResponse:"",dbResponse:"",isLoading:!0,token:"",signUpError:"",signInError:"",signInEmail:"",signInPassword:"",signUpFirstName:"",signUpLastName:"",signUpEmail:"",signUpPassword:""},a.onTextboxChangeSignInEmail=a.onTextboxChangeSignInEmail.bind(Object(c.a)(a)),a.onTextboxChangeSignInPassword=a.onTextboxChangeSignInPassword.bind(Object(c.a)(a)),a.onTextboxChangeSignUpFirstName=a.onTextboxChangeSignUpFirstName.bind(Object(c.a)(a)),a.onTextboxChangeSignUpLastName=a.onTextboxChangeSignUpLastName.bind(Object(c.a)(a)),a.onTextboxChangeSignUpEmail=a.onTextboxChangeSignUpEmail.bind(Object(c.a)(a)),a.onTextboxChangeSignUpPassword=a.onTextboxChangeSignUpPassword.bind(Object(c.a)(a)),a.onSignIn=a.onSignIn.bind(Object(c.a)(a)),a.onSignUp=a.onSignUp.bind(Object(c.a)(a)),a.logout=a.logout.bind(Object(c.a)(a)),a}return Object(l.a)(n,[{key:"callAPI",value:function(){var e=this;fetch("https://reactappconnectionapi.herokuapp.com/testAPI").then((function(e){return e.text()})).then((function(t){return e.setState({apiResponse:t})})).catch((function(e){return e}))}},{key:"callDB",value:function(){var e=this;fetch("https://reactappconnectionapi.herokuapp.com/testDB").then((function(e){return e.text()})).then((function(t){return e.setState({dbResponse:t})})).catch((function(e){return e}))}},{key:"componentDidMount",value:function(){var e=this;this.callAPI(),this.callDB();var t=h("the_main_app");t&&t.token?fetch("https://reactappconnectionapi.herokuapp.com/verify?token="+t.token).then((function(e){return e.json()})).then((function(n){n.success?e.setState({token:t.token,isLoading:!1}):e.setState({isLoading:!1})})).catch((function(e){return e})):this.setState({isLoading:!1})}},{key:"onTextboxChangeSignInEmail",value:function(e){this.setState({signInEmail:e.target.value})}},{key:"onTextboxChangeSignInPassword",value:function(e){this.setState({signInPassword:e.target.value})}},{key:"onTextboxChangeSignUpFirstName",value:function(e){this.setState({signUpFirstName:e.target.value})}},{key:"onTextboxChangeSignUpLastName",value:function(e){this.setState({signUpLastName:e.target.value})}},{key:"onTextboxChangeSignUpEmail",value:function(e){this.setState({signUpEmail:e.target.value})}},{key:"onTextboxChangeSignUpPassword",value:function(e){this.setState({signUpPassword:e.target.value})}},{key:"onSignUp",value:function(){var e=this,t=this.state,n=t.signUpFirstName,a=t.signUpLastName,s=t.signUpEmail,i=t.signUpPassword;this.setState({isLoading:!0}),fetch("https://reactappconnectionapi.herokuapp.com/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:n,lastName:a,email:s,password:i})}).then((function(e){return e.json()})).then((function(t){t.success?e.setState({signUpError:t.message,isLoading:!1,signUpFirstName:"",signUpLastName:"",signUpEmail:"",signUpPassword:""}):e.setState({signUpError:t.message,isLoading:!1})}))}},{key:"onSignIn",value:function(){var e=this,t=this.state,n=t.signInEmail,a=t.signInPassword;this.setState({isLoading:!0}),fetch("https://reactappconnectionapi.herokuapp.com/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:a})}).then((function(e){return e.json()})).then((function(t){console.log("here"),t.success?(console.log("signed in"),function(e,t){e||console.error("Error: Key is missing");try{localStorage.setItem(e,JSON.stringify(t))}catch(n){console.error(n)}}("the_main_app",{token:t.token}),e.setState({signInError:t.message,isLoading:!1,signInEmail:"",signInPassword:"",token:t.token})):e.setState({signInError:t.message,isLoading:!1})})).catch((function(e){return e}))}},{key:"logout",value:function(){var e=this;this.setState({isLoading:!0});var t=h("the_main_app");t&&t.token?fetch("https://reactappconnectionapi.herokuapp.com/logout?token="+t.token).then((function(e){return e.json()})).then((function(t){t.success?e.setState({token:"",isLoading:!1}):e.setState({isLoading:!1})})):this.setState({isLoading:!1})}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.token,a=e.signInError,i=e.signInEmail,o=e.signInPassword,r=e.signUpFirstName,l=e.signUpLastName,c=e.signUpEmail,p=e.signUpPassword,g=e.signUpError;return t?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",null,s.a.createElement("p",null,"Loading...")),s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App-header"},s.a.createElement("img",{src:u.a,className:"App-logo",alt:"logo"}),s.a.createElement("h1",{className:"App-title"},"Welcome to React")),s.a.createElement("p",{className:"App-intro"},this.state.apiResponse),s.a.createElement("p",{className:"App-intro"},this.state.dbResponse))):n?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",null,s.a.createElement("p",null,"Account"),s.a.createElement("button",{onClick:this.logout},"Logout")),s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App-header"},s.a.createElement("img",{src:u.a,className:"App-logo",alt:"logo"}),s.a.createElement("h1",{className:"App-title"},"Welcome to React")),s.a.createElement("p",{className:"App-intro"},this.state.apiResponse),s.a.createElement("p",{className:"App-intro"},this.state.dbResponse))):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",null,s.a.createElement("div",null,a?s.a.createElement("p",null,a):null,s.a.createElement("p",null,"Sign In"),s.a.createElement("br",null),s.a.createElement("input",{type:"email",placeholder:"Email",value:i,onChange:this.onTextboxChangeSignInEmail}),s.a.createElement("br",null),s.a.createElement("input",{type:"password",placeholder:"Password",value:o,onChange:this.onTextboxChangeSignInPassword}),s.a.createElement("br",null),s.a.createElement("button",{onClick:this.onSignIn},"Sign In")),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("div",null,g?s.a.createElement("p",null,g):null,s.a.createElement("p",null,"Sign Up"),s.a.createElement("br",null),s.a.createElement("input",{type:"text",placeholder:"First Name",value:r,onChange:this.onTextboxChangeSignUpFirstName}),s.a.createElement("br",null),s.a.createElement("input",{type:"text",placeholder:"Last Name",value:l,onChange:this.onTextboxChangeSignUpLastName}),s.a.createElement("br",null),s.a.createElement("input",{type:"email",placeholder:"Email",value:c,onChange:this.onTextboxChangeSignUpEmail}),s.a.createElement("br",null),s.a.createElement("input",{type:"password",placeholder:"Password",value:p,onChange:this.onTextboxChangeSignUpPassword}),s.a.createElement("br",null),s.a.createElement("button",{onClick:this.onSignUp},"Sign Up"))),s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App-header"},s.a.createElement("img",{src:u.a,className:"App-logo",alt:"logo"}),s.a.createElement("h1",{className:"App-title"},"Welcome to React")),s.a.createElement("p",{className:"App-intro"},this.state.apiResponse),s.a.createElement("p",{className:"App-intro"},this.state.dbResponse)))}}]),n}(a.Component);o.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(d,null)),document.getElementById("root"))},2:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},9:function(e,t,n){e.exports=n(17)}},[[9,1,2]]]);
//# sourceMappingURL=main.14e55c44.chunk.js.map